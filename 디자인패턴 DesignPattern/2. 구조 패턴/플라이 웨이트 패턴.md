# ğŸ—º í”Œë¼ì´ ì›¨ì´íŠ¸(Flyweight) íŒ¨í„´
í”Œë¼ì´ ì›¨ì´íŠ¸ íŒ¨í„´ì€ ë™ì¼í•˜ê±°ë‚˜ ìœ ì‚¬í•œ ê°ì²´ë“¤ ì‚¬ì´ì— ê°€ëŠ¥í•œ ë§ì€ ë°ì´í„°ë¥¼ ì„œë¡œ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”í•˜ëŠ” íŒ¨í„´ì´ë‹¤. í”Œë¼ì´ì›¨ì´íŠ¸ íŒ¨í„´ì—ì„œëŠ” ì¼ë¶€ ì˜¤ë¸Œì íŠ¸ì˜ ìƒíƒœ ì •ë³´ë¥¼ ì™¸ë¶€ ìë£Œ êµ¬ì¡°ì— ì €ì¥í•˜ì—¬ í”Œë¼ì´ì›¨ì´íŠ¸ ì˜¤ë¸Œì íŠ¸ê°€ ì ê¹ ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì „ë‹¬í•œë‹¤.

<img src="https://blog.kakaocdn.net/dn/bmXxUU/btrpcO3CO2L/r6kSalIbyKTkIKuZqO2fH1/img.png">

---

## ì˜ˆì‹œ ì½”ë“œ

```java
@Getter
@Setter
public class Pizza {

    private String name;
    private int price;
    private Dough dough;
    private Sauce sauce;
}
```

í”¼ìê°€ ìˆë‹¤.<br>
ì´ì œë¶€í„° í”¼ìë¥¼ ì•„ì£¼ ë§ì´ ë§Œë“¤ì–´ì„œ ë°°ì†¡í• ê±´ë°, ë§Œë“¤ ë•Œ ë§ˆë‹¤ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¡œ ìƒì„±í•´ì„œ ë°°ì†¡í•˜ê¸°ì—” ë©”ëª¨ë¦¬ê°€ ë„ˆë¬´ ì•„ê¹ë‹¤. ê·¸ë˜ì„œ ìì£¼ ë³€í•˜ì§€ ì•Šê³ , ë²”ìœ„ê°€ ì‘ì€ ì†ì„±ì¸ ë„ìš°ì™€ ì†ŒìŠ¤ë¥¼ í‚¤ê°’ìœ¼ë¡œ Mapì— ì €ì¥í•´ì„œ ì €ì¥ë˜ì–´ìˆëŠ” ë„ìš°ì™€ ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í”¼ìë¥¼ ë§Œë“¤ë•ŒëŠ” ë˜‘ê°™ì€ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ ì¬ì‚¬ìš©í•´ë³´ë ¤ê³  í•œë‹¤.

---

```java
@Getter
@AllArgsConstructor
@EqualsAndHashCode
public class Ingredient{
    private Dough dough;
    private Sauce sauce;
}

public enum Dough {
    NORMAL,
    THIN
}

public enum Sauce {
    TOMATO,
    CHEESE
}
```

ë„ìš°ì™€ ì†ŒìŠ¤ë¥¼ enumìœ¼ë¡œ ë§Œë“¤ê³  ë‘ í´ë˜ìŠ¤ë¥¼ ì—®ì–´ì„œ Keyê°’ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ Ingredientë¼ëŠ” ìƒˆ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.

---

```java
@NoArgsConstructor
public class PizzaIngredientFactory {
    private static final HashMap<Ingredient, Pizza> flyweightData = new HashMap<>();

    public static Pizza getIngredient(Dough dough, Sauce sauce) {

        Ingredient ingredient = new Ingredient(dough, sauce);

        Pizza pizza = flyweightData.get(ingredient);

        if (pizza == null) {
            pizza = new Pizza(ingredient);
            flyweightData.put(ingredient, pizza);
        }
        return pizza;
    }
}

public class Pizza {
    public Pizza(Ingredient ingredient){
        this.dough = ingredient.getDough();
        this.sauce = ingredient.getSauce();
    }
    ...
}
```

Doughì™€ Sauce ê°’ì„ ë°›ì•„ì„œ ê·¸ ë‘ê°œì˜ ì¬ë£Œë§Œ ì¤€ë¹„ë˜ì–´ìˆëŠ” í”¼ìë¥¼ ë°˜í™˜í•˜ëŠ” PizzaIngredientFactoryë¥¼ ë§Œë“¤ì–´ì¤¬ë‹¤. ê·¸ë¦¬ê³  Pizzaì— Ingredientë¡œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ìƒì„±ìë¥¼ ë§Œë“¤ì—ˆë‹¤. Ingredientë¥¼ í‚¤ë¡œ Mapì—ì„œ Pizzaë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë˜‘ê°™ì€ Ingredientë¥¼ ìš”ì²­í•˜ë©´ ë˜‘ê°™ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë°˜í™˜í•œë‹¤.

```java
public class App {

    public static void main(String[] args) {

        Pizza pizza1 = PizzaIngredientFactory.getIngredient(Dough.NORMAL, Sauce.TOMATO);
        pizza1.setName("ì¼ë°˜ í”¼ì");
        pizza1.setPrice(10000);
        System.out.println("pizza1 = " + pizza1);

        Pizza pizza2 = PizzaIngredientFactory.getIngredient(Dough.NORMAL, Sauce.TOMATO);
        pizza2.setName("íŠ¹ë³„í•œ í”¼ì");
        pizza2.setPrice(15000);
        System.out.println("pizza2 = " + pizza2);
    }
}
```

ì´ë ‡ê²Œ ì¶œë ¥í•´ë³´ë©´ pizza1ê³¼ pizza2ê°€ ê°™ì€ ê°’ì´ ë‚˜ì˜´ì„ ì•Œ ìˆ˜ ìˆë‹¤.<br>
ê·¼ë° ì—¬ê¸°ì„œ ì´ëŸ° ìƒê°ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì“°ëŠ”ë° ì„œë¡œ ë‹¤ë¥¸ ë‘ê°œì˜ ë³€ìˆ˜ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆë‚˜?

```java
System.out.println(pizza1.getName() + " " + pizza2.getName());
```

ë‹¹ì—°íˆ ë‚˜ì˜¬ ìˆ˜ ì—†ë‹¤. ë‘ê°œì˜ ì´ë¦„ì„ ê°€ì§„ ë‘ê°œì˜ ë³€ìˆ˜ì´ì§€ë§Œ, ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ê°’ì€ ë™ì¼í•˜ë‹¤. pizza1ê³¼ pizza2 ë³€ìˆ˜ë¥¼ ëª¨ë‘ ì„ ì–¸í•œ ë’¤ì— ì´ë ‡ê²Œ ì¶œë ¥í•´ë³´ë©´ `íŠ¹ë³„í•œ í”¼ì`ê°€ ë‘ ë²ˆ ì¶œë ¥ëœë‹¤. ê·¼ë° ì‚¬ì‹¤ ì´ë ‡ê²Œ ë‹¨ìˆœí•œ ìƒí™©ì—ì„œ í”Œë¼ì´ ì›¨ì´íŠ¸ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ”ê±´ ì˜¤íˆë ¤ ë©”ëª¨ë¦¬ë¥¼ ë” ë‚­ë¹„í•˜ëŠ” ê²Œ ë  ìˆ˜ë„ ìˆë‹¤.

```java
public class App {

    public static void main(String[] args) {

        Pizza pizza = PizzaIngredientFactory.getIngredient(Dough.NORMAL, Sauce.TOMATO);
        pizza.setName("ì¼ë°˜ í”¼ì");
        pizza.setPrice(10000);
        System.out.println("pizza = " + pizza);

        pizza = PizzaIngredientFactory.getIngredient(Dough.NORMAL, Sauce.TOMATO);
        pizza.setName("íŠ¹ë³„í•œ í”¼ì");
        pizza.setPrice(15000);
        System.out.println("pizza = " + pizza);
    }
}
```

ìœ„ì²˜ëŸ¼ ì‚¬ìš©í•  ë°”ì—ëŠ” ê·¸ëƒ¥ ì´ë ‡ê²Œ ì“°ëŠ”ê²Œ ë‚«ë‹¤. ì‹¤ì œë¡œ ì½”ë“œë¥¼ ì§¤ ë•ŒëŠ” ì € Pizza ë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ í´ë˜ìŠ¤ì—ì„œ í˜¸ì¶œí•´ì„œ ì¨ì•¼í•˜ê±°ë‚˜, Keyê°’ì´ ë˜ëŠ” enumê°’ì— ë”°ë¼ì„œ ê²°ì •ë˜ëŠ” ë‹¤ë¥¸ ë³µì¡í•œ ì •ë³´ê°€ ìˆì„ë•Œ í”Œë¼ì´ì›¨ì´íŠ¸ íŒ¨í„´ì„ ê³ ë ¤í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

ì´ <a href="https://github.com/rlaisqls/GoF-DesignPatterns/tree/master/src/main/java/com/study/gof/designpattrens/_02_StructuralPatterns/flyweight">ë§í¬</a>ë¡œ ê°€ë©´ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.