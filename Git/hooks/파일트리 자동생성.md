# 🌳 파일트리 자동생성

레포 폴더에 `.git/hook/pre-commit` 파일을 생성하여 아래 스크립트를 넣으면 커밋시에 README.md 파일에 트리가 자동으로 생성된다. (mac 기준)

```bash
#!/bin/bash

export LANG=UTF-8

function generate_project_tree() {

  tree /Users/rlaisqls/Documents/github/TIL -tf --noreport -I '~' --charset ascii $1 |
    gsed -e 's/[|]-\+/╊━/g' |
    gsed -e 's/[|]/┃/g' |
    gsed -e 's/[`]/┗━/g' |
    gsed -e 's/[-]/━/g' |
    gsed -e 's:\(━ \)\(\(.*/\)\([^/]\+\)\):\1[\4](\2):g' |
    gsed -e 's/)/)<\/br>/g' |
    gsed -e 's=/Users/rlaisqls/Documents/github/TIL/=./=g' |
    gsed -e 's=/Users/rlaisqls/Documents/github/TIL=./TIL</br>=g' |
    gsed -e 's/━━━/━/g' |
    gsed -e 's/[ ]/　/g' 
}

function generate_readme() {
  readme="/Users/rlaisqls/Documents/github/TIL/README.md"
  readme_template="/Users/rlaisqls/Documents/github/TIL/.git/hooks/readme_template.md"

  perl -p0e 's/__PROJECT_TREE__/`cat`/se' "$readme_template" > "$readme"
}


cd "$(dirname "$0")" || exit 1
generate_project_tree . | generate_readme .

cd /Users/rlaisqls/Documents/github/TIL 
git add /Users/rlaisqls/Documents/github/TIL/README.md
git commit --amend -C HEAD --no-verify

```

`.git/hook/readme-template.md`도 만들어준다. `__PROJECT_TREE__`를 제외한 나머지부분은 꾸미고 싶은대로 바꿔도 된다. 


```
레포지토리 파일트리

__PROJECT_TREE__
```