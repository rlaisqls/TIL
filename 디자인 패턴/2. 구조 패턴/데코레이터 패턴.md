# ğŸ—º ë°ì½”ë ˆì´í„°(Decorator) íŒ¨í„´

ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ ì£¼ì–´ì§„ ìƒí™© ë° ìš©ë„ì— ë”°ë¼ ê°ì²´ì— ì±…ì„ì„ ë§ë¶™ì´ëŠ” íŒ¨í„´ì´ë‹¤. ê¸°ë³¸ ê¸°ëŠ¥ì— ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì˜ ì¢…ë¥˜ê°€ ë§ì€ ê²½ìš°ì— ê° ì¶”ê°€ ê¸°ëŠ¥ì„ Decorator í´ë˜ìŠ¤ë¡œ ì •ì˜ í•œ í›„ í•„ìš”í•œ Decorator ê°ì²´ë¥¼ í•©í•¨ìœ¼ë¡œì¨ ì¶”ê°€ ê¸°ëŠ¥ì˜ ì¡°í•©ì„ ì„¤ê³„ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ ê°ì²´ì˜ ê²°í•© ì„ í†µí•´ ê¸°ëŠ¥ì„ ë™ì ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ í™•ì¥ í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

---

## ì˜ˆì‹œ ì½”ë“œ

```
public interface CommentService {

    void addComment(String comment);
}
public class DefaultCommentService implements CommentService{

    @Override
    public void addComment(String comment) {
        System.out.println(comment);
    }
}
```

ëŒ“ê¸€ì„ ì¶”ê°€í•˜ëŠ” ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ì™€ ê·¸ê±¸ ìƒì†ë°›ì•„ êµ¬í˜„í•œ í´ë˜ìŠ¤ê°€ ìˆë‹¤. ì—¬ê¸°ì— ëŒ“ê¸€ì„ í•„í„°ë§í•˜ëŠ” ë¡œì§ì„ ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ í†µí•´ ì¶”ê°€í•´ë³¼ ê²ƒì´ë‹¤. 

---

```
@RequiredArgsConstructor
public class CommentDecorator implements CommentService{

    private final CommentService commentService;

    @Override
    public void addComment(String comment) {
        commentService.addComment(comment);
    }

}
```

CommentServiceë¥¼ ìƒì†ë°›ì•„ CommentDecoratorí´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤. CommentServiceë¥¼ ì£¼ì…ë°›ì•„ì„œ CommentServiceì˜ addComment() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. ì´ ì¹œêµ¬ê°€ ì´ì œë¶€í„° ì¶”ê°€í•  Decoratorë“¤ì˜ ê·¼ê°„ì´ ë˜ì–´ì¤„ ê²ƒì´ë‹¤. 

---

```
public class SpamFilteringCommentDecorator extends CommentDecorator{

    public SpamFilteringCommentDecorator(CommentService commentService) {
        super(commentService);
    }

    @Override
    public void addComment(String comment) {
        if(isNotSpam(comment)) super.addComment(comment);
    }

    private boolean isNotSpam(String comment) {
        return !comment.contains("http");
    }

}

public class DateCommentDecorator extends CommentDecorator {

    public DateCommentDecorator(CommentService commentService) {
        super(commentService);
    }

    @Override
    public void addComment(String comment) {
        super.addComment(addDate(comment));
    }

    private String addDate(String comment) {
        return comment + "["+ LocalDateTime.now() +"]";
    }

}

public class TrimmingCommentDecorator extends CommentDecorator{

    public TrimmingCommentDecorator(CommentService commentService) {
        super(commentService);
    }

    @Override
    public void addComment(String comment) {
       super.addComment(trim(comment));
    }

    private String trim(String comment) {
        return comment.replace("...", "");
    }

}
```

addComment() ë©”ì„œë“œì— í•„í„°ë§, ë‚ ì§œ ì¶”ê°€ ë“± ê¸°ëŠ¥ì„ ì¶”ê°€(Decorate) í•´ì£¼ëŠ” Decoratorë“¤ì´ë‹¤. ì´ì œ ì´ê±¸ DefaultCommentServiceì— ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.

---

```
public class App {

    private static final boolean enabledSpamFilter = true;
    private static final boolean enabledTrimming = true;
    private static final boolean enabledDate = true;

    public static void main(String[] args) {

        CommentService commentService = new DefaultCommentService();

        if (enabledSpamFilter) commentService = new SpamFilteringCommentDecorator(commentService);
        if (enabledTrimming) commentService = new TrimmingCommentDecorator(commentService);
        if (enabledDate) commentService = new DateCommentDecorator(commentService);

        commentService.addComment("ëŒ“ê¸€");
    }
}
```

<p>ë°”ë¡œ ì´ë ‡ê²Œ ì¶”ê°€í•´ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì¡°ê±´ì— ë”°ë¼ ë™ì ìœ¼ë¡œ Decorator ë¡œì§ì„ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆë‹¤. Decoratorë¥¼ ëª¨ë‘ ì¶”ê°€í•œ commentServiceì—ì„œ addComment()ë¥¼ í˜¸ì¶œí•˜ë©´ Decoratorì˜ addComment()ê°€ ì°¨ë¡€ëŒ€ë¡œ ì‹¤í–‰ëœ í›„ì— ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ëœë‹¤.</p>
<p>ê·¼ë° ì´ê²Œ ì™œ ë ê¹Œ? ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•˜ìœ¼ë‹ˆê¹Œ íŠ¹ì • Decoratorë¥¼ commentServiceì— ëŒ€ì…í•  ìˆ˜ ìˆë‹¤ëŠ”ê±´ ì•Œê² ëŠ”ë°, ê·¸ê²Œ ì–´ë–»ê²Œ ì´ë ‡ê²Œ ì•¼ë¬´ì§€ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆì§€? ë¼ëŠ” ìƒê°ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê° í´ë˜ìŠ¤ì˜ addComment() ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ ê° ë©”ì„œë“œëª…ì„ ì¶œë ¥í•˜ì—¬ ë©”ì„œë“œì˜ ì‹¤í–‰ ì‹œê¸°ë¥¼ ì¶”ì²™í•´ë³´ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤.</p>
<br>

> DateCommentDecorator.addComment<br>
> CommentDecorator.addComment<br>
>
> TrimmingCommentDecorator.addComment<br>
> CommentDecorator.addComment<br>
>
> SpamFilteringCommentDecorator.addComment<br>
> CommentDecorator.addComment<br>
>
> DefaultCommentService.addComment<br>
> 
> ëŒ“ê¸€[2022-08-11T14:45:54.203837300]
> 

<br>
<p>Decoratorì˜ addComment()ê°€ mainì—ì„œ ì¶”ê°€í–ˆë˜ ìˆœì„œì˜ ì—­ìˆœìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. Decoratorë¥¼ ì¶”ê°€í•  ë•Œ commentServiceë¥¼ í•„ë“œë¡œ ê°€ì§€ë„ë¡ ìƒì„±í•˜ì—¬ ëŒ€ì…í–ˆë˜ ê²ƒì„ ìƒê°í•˜ë©´ ì‰½ê²Œ êµ¬ì¡°ë¥¼ íŒŒì•…í•  ìˆ˜ìˆë‹¤.</p>
<br>
DateCommentDecorator(CommentService)ì˜ addComment()ê°€<br> 
TrimmingCommentDecorator(CommentService)ë¥¼ í˜¸ì¶œí•˜ê³  TrimmingCommentDecoratorê°€<br> 
SpamFilteringCommentDecorator(CommentService)ë¥¼ í˜¸ì¶œí•˜ê³  SpamFilteringCommentDecoratorê°€<br>
DefaultCommentService(CommentService)ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ì¡°ì˜€ë‹¤.<br>
<br>
<p>ë§ˆì¹˜ ë§ˆíŠ¸ë£Œì‹œì¹´ì²˜ëŸ¼ ê´€ê³„ê°€ ì¤‘ì²©ë˜ì–´ ìˆì–´ì„œ ê°€ì¥ ê²‰ì— ìˆëŠ” Decoratorê°€ ì•ˆì— ìˆëŠ” Decoratorë¥¼ í˜¸ì¶œí•˜ë‹¤ê°€, ë§ˆì§€ë§‰ì— ì§„ì§œ DefaultCommentServiceê°€ í˜¸ì¶œë˜ë©´ì„œ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ë¦„ì€ Decoratorì§€ë§Œ Decorator í´ë˜ìŠ¤ê°€ Serviceí´ë˜ìŠ¤ë¥¼ ê¾¸ë©°ì£¼ëŠ”ê²Œ ì•„ë‹ˆë¼ ê°ì‹¸ëŠ” êµ¬ì¡°ì˜€ë˜ ê²ƒì´ë‹¤...! ë§ˆì¹˜ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì •ë³´ë¥¼ ìº¡ìŠí™”í•˜ì—¬ ì •ë³´ë¥¼ ì „ì†¡í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ëŠë‚Œì´ë‹¤. íŒ¨í„´ ì´ë¦„ì´ DecoratoríŒ¨í„´ì´ë¼ì„œ í•˜ë§ˆí„°ë©´ ì˜¤í•´í•  ë»” í–ˆë‹¤.</p>

<p>ì•„ë¬´íŠ¼ ì´ ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ë™ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ ììœ ë¡­ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. íŠ¹ì • ê¸°ëŠ¥ì„ ìœ ì—°í•˜ê²Œ ì¶”ê°€í•´ì•¼ í•  ë•Œ ì´ íŒ¨í„´ì„ í™œìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>

ì´ <a href="https://github.com/rlaisqls/GoF-DesignPatterns/tree/master/src/main/java/com/study/gof/designpattrens/_02_StructuralPatterns/decorator">ë§í¬</a>ë¡œ ê°€ë©´ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

ì¶œì²˜:<br>
https://www.inflearn.com/course/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4
