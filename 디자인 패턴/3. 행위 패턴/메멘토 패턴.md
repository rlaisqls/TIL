# ğŸ—º ë©”ë©˜í† (Memento) íŒ¨í„´

ë©”ë©˜í†  íŒ¨í„´ì€ ê°ì²´ë¥¼ ì´ì „ ìƒíƒœë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´ì´ë‹¤. í˜„ì¬(ì›ë³¸) ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê°ì²´ì¸ Originatorì—ì„œ íŠ¹ì • ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” Memento ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ CareTakerì— ì €ì¥í•˜ëŠ” êµ¬ì¡°ì´ë©°, í•µì‹¬ ê°ì²´ì˜ ë°ì´í„°ë¥¼ ê³„ì†í•´ì„œ ìº¡ìŠí™”ëœ ìƒíƒœë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ íŠ¹ì§•ì´ë‹¤. 

<img src="https://upload.wikimedia.org/wikipedia/commons/3/38/W3sDesign_Memento_Design_Pattern_UML.jpg">

---

## ì˜ˆì‹œ ì½”ë“œ


```java
@Getter
@Setter
public class Originator {
    private String state;

    public Memento saveStateToMemento() {
        return new Memento(state);
    }

    public void getStateFromMemento(Memento memento) {
        state = memento.getState();
    }
}
```

í˜„ì¬ ìƒíƒœë¥¼ ë‹´ê³ ìˆëŠ” ê°ì²´ì¸ Originatorì´ë‹¤. ìƒˆ Mementoë¥¼ ìƒì„±í•˜ê±°ë‚˜ Mementoë¡œë¶€í„° ì •ë³´ë¥¼ ë°›ì•„ì™€ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³ ìˆë‹¤.

```java
@Getter
@AllArgsConstructor
public class Memento {
    private String state;
}
```

íŠ¹ì • ì‹œì ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” Memento ê°ì²´ì´ë‹¤.

```java
public class CareTaker {
    private List<Memento> mementoList = new ArrayList<>();

    public void add(Memento state) {
        mementoList.add(state);
    }

    public Memento get(int index) {
        return mementoList.get(index);
    }
}
```

Mementoë¥¼ Listí˜•íƒœë¡œ ì €ì¥í•˜ê³ ìˆëŠ” CareTakerì´ë‹¤. ìƒˆë¡œìš´ Mementoë¥¼ ì €ì¥í•˜ê±°ë‚˜ êº¼ë‚´ì˜¤ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.

```java
public class App {

    public static void main(String[] args) {

        Originator originator = new Originator();
        CareTaker careTaker = new CareTaker();

        originator.setState("state1");
        originator.setState("state2");
        careTaker.add(originator.saveStateToMemento());

        originator.setState("state3");
        careTaker.add(originator.saveStateToMemento());

        originator.setState("state4");
        careTaker.add(originator.saveStateToMemento());

        System.out.println("í˜„ì¬ ìƒíƒœ : " + originator.getState());
        System.out.println("ì²« ë²ˆì§¸ ì €ì¥ : " + careTaker.get(0).getState());
        System.out.println("ë‘ ë²ˆì§¸ ì €ì¥ : " + careTaker.get(1).getState());

        originator.getStateFromMemento(careTaker.get(0)); //ë‘ë²ˆì§¸ ì €ì¥ìœ¼ë¡œ Rollback
        System.out.println("ë¡¤ë°± í›„ ìƒíƒœ : " + originator.getState());
    }
}
```

ì´ì™€ ê°™ì´ ìƒíƒœë¥¼ careTakerì— ì €ì¥í•˜ì—¬ ê°€ì ¸ì˜¤ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

ì´ <a href="https://github.com/rlaisqls/GoF-DesignPatterns/tree/master/src/main/java/com/study/gof/designpattrens/_03_BehavioralPattern/memento">ë§í¬</a>ë¡œ ê°€ë©´ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.