# ğŸ—º ì¤‘ì¬ì(Mediator) íŒ¨í„´

ì¤‘ì¬ì íŒ¨í„´ì€ ê°ì²´ê°„ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ í•˜ëŠ” ê²½ìš° ì¤‘ì¬ìë¥¼ ìƒì„±í•˜ì—¬ ê°ì²´ë¼ë¦¬ì˜ ê²°í•©ì„ ì•½í™”í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤. ì¤‘ì¬ì íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ N:Mê°œì˜ ê°ì²´, ë˜ëŠ” N:1ê°œì˜ ê°ì²´ê°„ì˜ ë°ì´í„° ì „ë‹¬ë„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ê°ì²´ì˜ í†µì‹ ì„ ë‹¤ë£¬ë‹¤ëŠ” ì ì—ì„œ ì˜µì €ë²„ íŒ¨í„´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, ì˜µì €ë²„íŒ¨í„´ì€ í•œ ê°ì²´ì—ì„œ ì¼ë°©ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì†¡ì‹ í•˜ëŠ”ë° ë°˜í•´ ì¤‘ì¬ìíŒ¨í„´ì€ ì–‘ë°©í–¥ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ì°¨ì´ì ì´ë‹¤.

<img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Mediator_design_pattern.png">

---

## ì˜ˆì‹œ ì½”ë“œ

```java
@Getter
@Setter
public abstract class Colleague {

    protected String name;
    private Mediator mediator;
    private String message;

    public Colleague(String name) {
        this.name = name;
    }

    public void send() {
        System.out.println(this.name + " send()");
        mediator.mediate(this);
    }

    public abstract void receive(Colleague colleague);

}

public class ConcreteColleague extends Colleague{

    public ConcreteColleague(String name) {
        super(name);
    }

    @Override
    public void receive(Colleague colleague) {
        System.out.println(this.name + " received " + colleague.getName() + "'s Message : " + colleague.getMessage());
    }

}
```

ë‹¤ë¥¸ ê°ì²´ì™€ í†µì‹ ì„ í•˜ëŠ” Colleagueë¥¼ ë§Œë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ, Colleagueê°€ ì§ì ‘ ë™ì‹ í•˜ì§€ëŠ” ì•Šê³  Mediatorë¥¼ ê±°ì³ì•¼ í†µì‹ í•  ìˆ˜ ìˆë‹¤. 

```java
public interface Mediator {
    void addColleague(Colleague colleague);
    void mediate(Colleague colleague);
}

public class ConcreteMediator implements Mediator {
    private final List<Colleague> colleagues = new ArrayList<>();

    @Override
    public void addColleague(Colleague colleague) {
        this.colleagues.add(colleague);
        colleague.setMediator(this);
    }

    @Override
    public void mediate(Colleague colleague) {
        for (Colleague receiverColleague : colleagues) {
            System.out.println("    Mediating " + colleague.getName() + " to " + receiverColleague.getName());
            receiverColleague.receive(colleague);
        }
    }
}
```

Mediator í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µì œí•´ì¤€ë‹¤. Colleagueë¥¼ listë¡œ ê°€ì§€ê³ ìˆê³  mediate()ë¥¼ í˜¸ì¶œí•˜ë©´ ê·¸ Colleagueë“¤ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë¿Œë ¤ì¤€ë‹¤. ë§ˆì¹˜ SocketIoì—ì„œ `socketIOServer.getRoomOperations().sendEvent();`ë¡œ ì†Œì¼“ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤...!

```java
public class App {
    public static void main(String args[]) {
        Mediator mediator = new ConcreteMediator();
        Colleague colleague1 = new ConcreteColleague("User1");
        Colleague colleague2 = new ConcreteColleague("User2");

        mediator.addColleague(colleague1);
        mediator.addColleague(colleague2);

        colleague1.setMessage("Hello, world!");
        colleague1.send();
    }
}
```

```java
//ì‹¤í–‰ ê²°ê³¼
User1 send()
    Mediating User1 to User1
User1 received Message : Hello, world!
    Mediating User1 to User2
User2 received Message : Hello, world!
```

colleague1ì—ì„œ mediatorë¡œ ë³´ë‚¸ ë©”ì„¸ì§€ê°€ mediatorë¥¼ êµ¬ë…í•˜ê³  ìˆëŠ” ê°ì²´ë“¤ì—ê²Œ ë¬´ì‚¬íˆ ì „ë‹¬ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ì—¬ëŸ¬ ê°ì²´ê°„ì˜ í†µì‹ ì„ ì¤‘ì¬í•´ì£¼ëŠ” ê°ì²´ë¥¼ ì¶”ê°€í•´ì¤Œìœ¼ë¡œì¨, í†µì‹  ê°ì²´ ê°„ ì˜ì¡´ì„±ì„ ì¤„ì—¬ ê²°í•©ë„ë¥¼ ê°ì†Œì‹œí‚¤ëŠ” ê²ƒì´ ì¤‘ì¬ì íŒ¨í„´ì´ì—ˆë‹¤.

ì´ <a href="https://github.com/rlaisqls/GoF-DesignPatterns/tree/master/src/main/java/com/study/gof/designpattrens/_03_BehavioralPattern/mediator">ë§í¬</a>ë¡œ ê°€ë©´ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.